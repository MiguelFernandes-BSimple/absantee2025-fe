<form [formGroup]="taskForceForm" (ngSubmit)="createTaskForce()" class="form-card">
    <!-- Description -->
    <div class="form-row">
        <label class="form-label">Description</label>
        <input type="text" formControlName="description" class="form-input" />
    </div>

    <!-- Project -->
    <div class="form-row">
        <label class="form-label">Project</label>
        <select formControlName="projectId" class="form-input">
            <option value="">Select a project</option>
            @for (p of projects; track p.id) {
            <option [value]="p.id">{{ p.title }}</option>
            }
        </select>
    </div>

    <!-- Subject -->
    <div class="form-row">
        <label class="form-label">Subject</label>
        <select formControlName="subjectId" class="form-input">
            <option value="">Select a subject</option>
            @for (s of subjects; track s.id) {
            <option [value]="s.id">{{ s.description }}</option>
            }
        </select>
    </div>

    <!-- Period -->
    <div class="form-row" style="display: flex; gap: 1rem;">
        <div style="flex: 1;">
            <label class="form-label">Init Date</label>
            <input type="date" formControlName="initDate" class="form-input" />
        </div>
        <div style="flex: 1;">
            <label class="form-label">End Date</label>
            <input type="date" formControlName="endDate" class="form-input" />
        </div>
    </div>

    <!-- Collaborators -->
    <div class="form-row">
        <label class="form-label">Collaborators (Select at least 2)</label>

        <div class="checkbox-list scroll-box">
            @for (c of collaborators; track c.id) {
            <label class="checkbox-item">
                <input type="checkbox" [value]="c.id" (change)="onCheckboxChange($event)"
                    [checked]="collaboratorIds.value.includes(c.id)" />
                {{ c.email }}
            </label>
            }
        </div>
    </div>

    <div class="actions">
        <button type="submit" [disabled]="taskForceForm.invalid">Create Task Force</button>
        <button type="button" routerLink='/taskforces'>Cancel</button>
    </div>
</form>